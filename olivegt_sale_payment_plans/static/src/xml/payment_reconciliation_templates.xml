<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">
    <!-- Override the standard payment reconciliation template to add overdue information -->
    <t t-name="olivegt_sale_payment_plans.PaymentPlanReconcileInfo" t-extend="account.ReconciliationLine">
        <t t-jquery=".match" t-operation="append">
            <t t-if="line and line.overdue_days and line.overdue_days > 0">
                <div class="payment_plan_overdue_info alert alert-warning">
                    <div><strong>Overdue Days:</strong> <span t-esc="line.overdue_days"/></div>
                    <div><strong>Interest Amount:</strong> <span t-esc="line.interest_amount" t-options="{'widget': 'monetary', 'display_currency': line.currency_id}"/></div>
                    <div><strong>Total with Interest:</strong> <span t-esc="line.total_with_interest" t-options="{'widget': 'monetary', 'display_currency': line.currency_id}"/></div>
                    <div class="mt-2">
                        <strong>Note:</strong> This payment is overdue. The total amount with interest must be paid to fully reconcile this line.
                    </div>
                </div>
            </t>
        </t>
    </t>    <!-- Create another template for direct injection into the modal -->    <t t-name="olivegt_sale_payment_plans.PaymentReconcileModal">
        <div class="payment_plan_overdue_info alert alert-warning mb-3">
            <h5 class="alert-heading">⚠️ Overdue Payment Information</h5>
            <table class="table table-sm table-borderless mb-0">
                <tr>
                    <td class="text-right"><strong>Overdue Days:</strong></td>
                    <td><span class="badge badge-danger" t-esc="overdue_days || 0"/></td>
                </tr>
                <tr>
                    <td class="text-right"><strong>Interest Amount:</strong></td>
                    <td>
                        <span class="o_monetary_field"><t t-esc="interest_amount || 0.0"/></span>
                        <span t-if="currency_id" t-esc="currency_id[1]"/>
                    </td>
                </tr>
                <tr>
                    <td class="text-right"><strong>Total with Interest:</strong></td>
                    <td>
                        <span class="font-weight-bold o_monetary_field"><t t-esc="total_with_interest || 0.0"/></span>
                        <span t-if="currency_id" t-esc="currency_id[1]"/>
                    </td>
                </tr>
            </table>
            <hr/>
            <div class="mt-2">
                <strong>Important:</strong> This payment is overdue. The total amount with interest (<span class="font-weight-bold" t-esc="total_with_interest || 0.0"/> <span t-if="currency_id" t-esc="currency_id[1]"/>) must be paid to fully reconcile this line.
            </div>
        </div>
    </t>
</templates>
